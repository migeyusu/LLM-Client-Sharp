[ç®€ä½“ä¸­æ–‡](README.md) | [English](README.en-US.md)

# LLM Client for WPF

ä¸€ä¸ªåŸºäº `.NET` å’Œ `WPF` æŠ€æœ¯å®ç°çš„å¤§è¯­è¨€æ¨¡å‹ (LLM) å®¢æˆ·ç«¯é¡¹ç›®ï¼Œæ—¨åœ¨æä¾›ä¸€ç§è½»é‡çº§ã€ç›´è§‚ä¸”åŠŸèƒ½ä¸°å¯Œçš„äº¤äº’å·¥å…·ï¼Œç”¨äºä½¿ç”¨å¤šç§æ”¯æŒçš„ LLM æœåŠ¡ã€‚æœ¬é¡¹ç›®é»˜è®¤æ”¯æŒ GitHub Copilot æœåŠ¡ä¸‹æä¾›çš„ä¸€äº›æ¨¡å‹ï¼ˆå¦‚ `GPT-4o`ã€`O1` å’Œ `DeepSeek`ï¼‰ï¼Œå¹¶å¯é€šè¿‡æ‰©å±•æ”¯æŒå…¶ä»–æœåŠ¡ç»ˆç»“ç‚¹ã€‚

![é¡¹ç›®æˆªå›¾](images/model_selection.png)

## çº¯ .NET WPF å®ç°
   æˆ‘æƒ³è¯æ˜ï¼Œå®Œå…¨ä½¿ç”¨.Netå’Œç»å…¸çš„WPFæ„å»ºä¸€ä¸ªå¯ç”¨çš„ã€ç°ä»£åŒ–çš„LLMå®¢æˆ·ç«¯æ˜¯å¯è¡Œçš„ğŸ‘ã€‚ç›®å‰çš„å®ç°å¤§éƒ½åŸºäºpython+tsğŸ˜¢ã€‚
   - ä½¿ç”¨ `MaterialDesignThemes` å®ç°ç°ä»£åŒ–ç•Œé¢è®¾è®¡ã€‚
   - åˆ©ç”¨ `Microsoft.Extensions.AI` ç”¨äºé›†æˆå¤§è¯­è¨€æ¨¡å‹ APIã€‚
   - åˆ©ç”¨ `Markdig.Wpf` å®ç°Markdownè§£æ
   - åˆ©ç”¨`Microsoft.SemanticKernel`å®ç°æ ¸å¿ƒçš„å¤§æ¨¡å‹å¯¹è¯å’ŒRAGèƒ½åŠ›
   - åˆ©ç”¨`ig`å®ç°PDFæ–‡æ¡£çš„è¯»å–å’Œè§£æ
   - åˆ©ç”¨`ModelContextProtocol`å®ç°MCPåè®®çš„æ”¯æŒ
   - åˆ©ç”¨`TextMateSharp`å®ç°è¯­æ³•é«˜äº®
   ---
## åŸºç¡€ä¼šè¯åŠŸèƒ½
   **ç»ˆç»“ç‚¹-æ¨¡å‹é…ç½®**
   é…ç½®æŒ‰ç…§ç»ˆç»“ç‚¹è¿›è¡Œåˆ’åˆ†ï¼Œç”¨æˆ·å¯ä»¥æ·»åŠ å¤šä¸ªç»ˆç»“ç‚¹ï¼Œå¹¶ä¸ºæ¯ä¸ªç»ˆç»“ç‚¹æ·»åŠ ä¸åŒçš„æ¨¡å‹ã€‚
   é¢„è®¾æœ‰ GitHub Copilot ç»ˆç»“ç‚¹ï¼Œç”¨æˆ·åªéœ€æä¾› Token å³å¯ä½¿ç”¨ã€‚
   ![alt text](images/github_copilot.png)
   ä¹Ÿå¯ä»¥è‡ªå®šä¹‰OpenAI APIå…¼å®¹çš„å„ç§ç»ˆç»“ç‚¹ï¼Œè¿™é‡Œæˆ‘æ·»åŠ äº†å››ä¸ªAPI Endpointsï¼š
   ![alt text](images/openrouter.png)
   ä¸Šé¢æ˜¯æœ€å¤§çš„æ¨¡å‹ä¾›åº”å•†[openrouter](https://openrouter.com)ï¼Œå¯è§é™¤äº†æ”¯æŒæ‰‹åŠ¨é…ç½®æ¨¡å‹å¤–ï¼Œè¿˜å¯ä»¥å¡«å†™æ¨¡å‹idç„¶åä»openrouteræ‹‰å–æ¨¡å‹ç›¸å…³ä¿¡æ¯ï¼Œæ–¹ä¾¿ç”¨æˆ·ã€‚
   **åˆ›å»ºå¯¹è¯**
   åœ¨å·¦ä¸‹è§’é€‰æ‹©''æ–°å»ºå¯¹è¯''ï¼Œé€‰æ‹©ç»ˆç»“ç‚¹å’Œæ¨¡å‹ï¼Œè¾“å…¥é—®é¢˜å³å¯å¼€å§‹å¯¹è¯ã€‚
   ![alt text](images/createdialog.png)
   ![alt text](images/modelselection.png)
   å¯è§æ¯ä¸ªæ¨¡å‹éƒ½æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œä¸åŒçš„ç‰¹æ€§å°†æ‹¥æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ”¯æŒæµå¼è¾“å‡ºã€æ”¯æŒå‡½æ•°è°ƒç”¨ç­‰ã€‚è¿™äº›ç‰¹æ€§ä¹Ÿä¼šå½±å“å¯¹è¯çš„åŠŸèƒ½å¯ç”¨æ€§ã€‚
   **å¯¹è¯ç•Œé¢**
   ![alt text](images/dialog_ui.png)
   - ç²¾ç»†çš„å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œç”¨æˆ·å¯æ¸…ç©ºå†å²ã€éš”ç¦»å†å²ã€æ’é™¤å•æ¡å›å¤ã€‚ä¸åŒäºé‚£äº›è‡ªåŠ¨ç®¡ç†ä¸Šä¸‹æ–‡çš„å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥å®Œå…¨æ§åˆ¶ä¸Šä¸‹æ–‡ä¼ é€’ã€‚
   - æ”¯æŒæ¶ˆæ¯ç±»å‹åŒºåˆ†ï¼ˆå¦‚ç”¨æˆ·æ¶ˆæ¯ã€æ¨¡å‹å›å¤ã€ç³»ç»Ÿæ¶ˆæ¯ç­‰ï¼‰ã€‚
   - æ”¯æŒå¯¹è¯è®°å½•çš„ä¿å­˜ä¸åŠ è½½ï¼Œä¾¿äºé•¿æœŸä½¿ç”¨å’Œç®¡ç†ã€‚
   - å¯é‡å‘æ¶ˆæ¯
   - å¯å¯¹æ¯”æ¶ˆæ¯ï¼ˆå¯¹æ¯”æ—¶å®Œæ•´æ”¯æŒä¸Šä¸‹æ–‡å¦‚å‡½æ•°è°ƒç”¨ï¼‰
   - å¯åˆ‡æ¢æ¨¡å‹å’Œè°ƒæ•´æ¨¡å‹å‚æ•°
   - ![alt text](images/model_param.png)
   - å¯æœç´¢å¯¹è¯ï¼Œå¹¶ä»¥é»„è‰²é«˜äº®æ˜¾ç¤ºï¼Œå¯å¿«é€Ÿå®šä½æœç´¢ç»“æœ
   - æ”¯æŒMarkdownæ¸²æŸ“ï¼Œæ”¯æŒä»£ç é«˜äº®
   - æ”¯æŒå¯¹è¯å¯¼å‡ºä¸ºMarkdownæ ¼å¼ï¼Œä¾¿äºå­˜æ¡£å’Œåˆ†äº«
   - æ”¯æŒå¯¹è¯å…‹éš†
   - æ”¯æŒå¯¹è¯å¤‡ä»½å’Œå¯¼å…¥
   - æ”¯æŒå¯¹è¯è®°å½•çš„UIè™šæ‹ŸåŒ–ï¼Œæå‡æ€§èƒ½
   - æ”¯æŒä¸»é¢˜åˆ‡æ¢ï¼ˆæš—é»‘æ¨¡å¼å’Œæ˜äº®æ¨¡å¼ï¼‰
![é¡¹ç›®æˆªå›¾](images/darkmode.png)
![é¡¹ç›®æˆªå›¾](images/lightmode.png)
   - æ”¯æŒä»£ç é«˜äº®ä¸»é¢˜åˆ‡æ¢
   **å¯¹è¯åŠŸèƒ½**
   - å‚æ•°æ›´æ”¹ã€æ¨¡å‹åˆ‡æ¢
   - æ”¯æŒæ¶ˆæ¯é‡å‘
   - æ”¯æŒæ¶ˆæ¯å¯¹æ¯”
   - æ”¯æŒè¯­æ–™åº“æœç´¢å¹¶æ‰‹åŠ¨é€‰æ‹©åŠ å…¥ä¸Šä¸‹æ–‡
   - æ”¯æŒæµå¼è¾“å‡º
   - æ”¯æŒå‡½æ•°è°ƒç”¨ï¼ˆä¹ƒè‡³MCPï¼‰
   - æ”¯æŒå›¾ç‰‡è¾“å…¥ï¼ˆå¯ä»¥ç›´æ¥åœ¨è¾“å…¥æ¡†é»è´´å›¾ç‰‡ï¼‰
   - æ”¯æŒRAGå‡½æ•°ï¼ˆè¯­æ–™åº“åŠŸèƒ½è¢«å°è£…ä¸ºFunctionï¼Œä»è€Œæœ€å¤§å‘æŒ¥å¤§æ¨¡å‹çš„çµæ´»æ€§ï¼‰
   - æ”¯æŒæœç´¢å‚æ•°ï¼ˆä¸åŒAPIä¾›åº”å•†ä¼šæœ‰ä¸åŒçš„é™„åŠ å‚æ•°ï¼Œå¦‚OpenRouterï¼‰
   - æ”¯æŒæœç´¢å·¥å…·ï¼ˆFunction Callï¼‰
   - æ”¯æŒThinkingå¼€å…³ï¼ˆOpenRouterï¼‰

## ç²¾ç»†RAG
Retrieval-Augmented Generation æŒ‡çš„æ˜¯é€šè¿‡æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å¢å¼ºç”Ÿæˆå¼æ¨¡å‹çš„å›ç­”èƒ½åŠ›ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒRAG åŠŸèƒ½å…è®¸ç”¨æˆ·å°†å¤–éƒ¨çŸ¥è¯†åº“ï¼ˆå¦‚æ–‡æ¡£ã€ç½‘é¡µç­‰ï¼‰ä¸å¤§è¯­è¨€æ¨¡å‹ç»“åˆä½¿ç”¨ï¼Œä»¥æä¾›æ›´å‡†ç¡®å’Œä¸Šä¸‹æ–‡ç›¸å…³çš„å›ç­”ã€‚ä¸åŒäºæ™®é€šçš„RAGï¼Œæœ¬é¡¹ç›®çš„RAGåŠŸèƒ½å…·ä¸‰å¤§ç‰¹ç‚¹ï¼š
1. **ç²¾ç»†åŒ–æ–‡ä»¶å¯¼å…¥**ï¼šæˆ‘ä»¬çŸ¥é“RAGç“¶é¢ˆåœ¨äºæ–‡æ¡£çš„é¢„å¤„ç†ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µå¯èƒ½ä¸¢å¤±å¤§é‡ä¿¡æ¯ã€‚æœ¬é¡¹ç›®æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚PDFã€Wordã€æ–‡æœ¬æ–‡ä»¶ç­‰ï¼‰çš„å¯¼å…¥ï¼Œå¹¶æä¾›ç»†ç²’åº¦çš„åˆ†å—å’ŒåµŒå…¥é€‰é¡¹ï¼Œç¡®ä¿æœ€å¤§é™åº¦åœ°ä¿ç•™æ–‡æ¡£å†…å®¹çš„å®Œæ•´æ€§ã€‚
2. **å‡½æ•°è°ƒç”¨é›†æˆ**ï¼šRAG åŠŸèƒ½è¢«å°è£…ä¸ºå‡½æ•°è°ƒç”¨ï¼Œä¸ä»…ä»…æœ‰Queryï¼Œè¿˜æœ‰æ–‡æ¡£ç»“æ„æŸ¥è¯¢ç­‰åŠŸèƒ½ï¼Œè®©LLMåœ¨ç†è§£æ–‡æ¡£æ¦‚è§ˆçš„å‰æä¸‹ç”ŸæˆQueryå­—ç¬¦ä¸²ã€‚è¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨å¤§æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼ŒåŠ¨æ€å†³å®šä½•æ—¶è°ƒç”¨RAGåŠŸèƒ½ï¼Œä»è€Œæå‡å›ç­”çš„ç›¸å…³æ€§å’Œå‡†ç¡®æ€§ã€‚
3. **ç»“æ„åŒ–æŸ¥è¯¢**ï¼šæ–‡ä»¶ä¸ä¼šè¢«ç›´æ¥åˆ‡åˆ†ä¸ºæ‰å¹³å—ï¼Œè€Œæ˜¯ä¼šè¢«è§£æä¸ºç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ç« èŠ‚ã€æ®µè½ç­‰ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡ªåŠ¨ç”ŸæˆSummaryï¼Œä»è€Œæ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢ç­–ç•¥ã€‚æŸ¥è¯¢è¿‡ç¨‹ä¼šåŸºäºç»“æ„çš„ç‰¹æ€§ï¼Œé€‰æ‹©æ€§åœ°æ‰§è¡Œè‡ªé¡¶å‘ä¸‹æˆ–è‡ªåº•å‘ä¸Šçš„æ£€ç´¢ç­–ç•¥ã€‚æŸ¥è¯¢ç»“æœä¹Ÿä¼šä»¥ç»“æ„åŒ–çš„å½¢å¼è¿”å›ï¼Œä¾¿äºå¤§æ¨¡å‹ç†è§£å’Œä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œè¿”å›çš„æŸä¸ªæ®µè½å°†åŒ…å«ä»–çš„ç« èŠ‚ä¿¡æ¯ï¼Œæ–¹ä¾¿æ¨¡å‹ç†è§£ä¸Šä¸‹æ–‡ã€‚

## å¾…å®Œæˆç‰¹æ€§

ä»¥ä¸‹åŠŸèƒ½æ­£åœ¨è®¡åˆ’å¼€å‘ä¸­ï¼š

1. **ç¼–æ’é¢„è®¾ CoT**
   - æ”¯æŒç¼–æ’åŸºäº Chain-of-Thought (CoT) çš„æ¨ç†è¿‡ç¨‹ï¼Œå¸®åŠ©ç”¨æˆ·æ›´é«˜æ•ˆåœ°è·å¾—å¤šæ­¥æ¨ç†è¾“å‡ºã€‚

2. **Auto-CoT**
   - è‡ªåŠ¨ç”Ÿæˆ Chain-of-Thought æ¨ç†ï¼Œæå‡å¤æ‚ä»»åŠ¡çš„è‡ªåŠ¨åŒ–å¤„ç†æ•ˆæœã€‚

3. **è‡ªåŠ¨ä¸Šä¸‹æ–‡ç®¡ç†**
   - æä¾›ä¸Šä¸‹æ–‡çš„æ™ºèƒ½ç®¡ç†åŠŸèƒ½ï¼Œæ— éœ€æ‰‹åŠ¨æ’é™¤å†å²è®°å½•ã€‚
   - 
## å¦‚ä½•å‚ä¸é¡¹ç›®

æœ¬é¡¹ç›®å°šåœ¨å¼€å‘é˜¶æ®µï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å‚ä¸ï¼š

1. æäº¤ Issue æˆ– PRï¼šä»»ä½•å…³äºåŠŸèƒ½åé¦ˆã€Bug ä¿®å¤æˆ–è€…æ–°ç‰¹æ€§çš„å»ºè®®éƒ½éå¸¸æ¬¢è¿ï¼
2. æˆä¸ºè´¡çŒ®è€…ï¼šç›´æ¥ Fork æœ¬é¡¹ç›®ï¼Œå¹¶å‘èµ· Pull Requestã€‚
3. è”ç³»ä½œè€…ï¼šå¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–è€…åˆä½œæ„å‘ï¼Œå¯ä»¥é€šè¿‡ [GitHub Issues](https://github.com/) è”ç³»æˆ‘ã€‚


## ä½¿ç”¨æ–¹æ³•

> å¾…è¯¦ç»†æ·»åŠ é¡¹ç›®çš„ç¼–è¯‘ã€è¿è¡Œå’Œé…ç½®è¯´æ˜ã€‚

## æ„Ÿè°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºåº“å’Œå·¥å…·çš„æ”¯æŒï¼š

- [MaterialDesignInXAML](https://github.com/MaterialDesignInXAML/MaterialDesignInXamlToolkit)
- [TextmateSharp](https://github.com/microsoft/TextMateSharp)
- [Microsoft.Extensions.AI](https://learn.microsoft.com/en-us/dotnet/)

---

è¿™æ˜¯ä¸€ä¸ªå……æ»¡æ½œåŠ›çš„é¡¹ç›®ï¼Œæ¬¢è¿å¤§å®¶åŠ å…¥è¿›æ¥ï¼Œå…±åŒæ‰©å±•å…¶åº”ç”¨åœºæ™¯ï¼
