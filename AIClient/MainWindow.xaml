<Window x:Class="LLMClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LLMClient"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Style="{StaticResource MaterialDesignWindow}"
        Title="MainWindow" Height="850" Width="1600"
        d:DataContext="{d:DesignInstance local:MainWindow}">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <TextBox Height="100"
                 VerticalAlignment="Top"
                 materialDesign:HintAssist.Hint="输入Prompt"
                 AcceptsReturn="True"
                 Text="{Binding  PromptString,Mode=TwoWay}"
                 IsEnabled="{Binding Path=IsChecked, ElementName=MaterialDesignOutlinedTextBoxEnabledComboBox}"
                 Style="{StaticResource MaterialDesignOutlinedTextBox}"
                 TextWrapping="Wrap"
                 VerticalScrollBarVisibility="Auto" />
        <Button Grid.Row="0"
                Click="SendPrompt_OnClick"
                Width="120"
                Height="30"
                Style="{StaticResource MaterialDesignFlatLightButton}"
                Content="发送"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Margin="10" />
        <ScrollViewer Grid.Row="1"
                      Margin="0,10">
            <ItemsControl VerticalAlignment="Stretch"
                          Margin="0,0,5,0"
                          ItemsSource="{Binding Dialog,Mode=OneWay}">
                <ItemsControl.Resources>
                    <DataTemplate DataType="{x:Type local:RequestItem}">
                        <materialDesign:Card Padding="8"
                                             Margin="0,10,0,0"
                                             HorizontalAlignment="Right"
                                             Background="{DynamicResource MaterialDesign.Brush.Primary}"
                                             Foreground="{DynamicResource MaterialDesign.Brush.Primary.Foreground}">
                            <TextBlock Text="{Binding MessageContent,Mode=OneTime}" />
                        </materialDesign:Card>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type local:ResponseItem}">
                        <materialDesign:Card Padding="8"
                                             Margin="0,10"
                                             Style="{StaticResource MaterialDesignOutlinedCard}">
                            <RichTextBox IsDocumentEnabled="True" local:RichTextBoxHelper.DocumentXaml="{Binding Document,Mode=OneTime}" />
                        </materialDesign:Card>
                    </DataTemplate>
                </ItemsControl.Resources>
            </ItemsControl>
        </ScrollViewer>

        <materialDesign:Card Grid.Row="1"
                             Padding="6"
                             Margin="8"
                             Visibility="{Binding IsResponsing,Mode=OneWay,Converter={StaticResource BooleanToVisibilityConverter}}"
                             materialDesign:ElevationAssist.Elevation="Dp12"
                             Style="{StaticResource MaterialDesignOutlinedCard}">
            <ScrollViewer>
                <TextBlock Text="{Binding PreResponse,Mode=OneWay}"
                           Foreground="Black"
                           HorizontalAlignment="Stretch"
                           TextWrapping="Wrap" />
            </ScrollViewer>
        </materialDesign:Card>
        <!--<FlowDocumentReader Grid.Row="1">
            <FlowDocumentReader.Document>
                <FlowDocument ColumnWidth="400">
                    <Section Background="GhostWhite">
                        <Paragraph>
                            A UIElement element may be embedded directly in flow content
                            by enclosing it in a BlockUIContainer element.
                        </Paragraph>
                        <BlockUIContainer>
                            <Button Click="ButtonBase_OnClick">Click me!</Button>
                        </BlockUIContainer>
                        <Paragraph>
                            The BlockUIContainer element may host no more than one top-level
                            UIElement.  However, other UIElements may be nested within the
                            UIElement contained by an BlockUIContainer element.  For example,
                            a StackPanel can be used to host multiple UIElement elements within
                            a BlockUIContainer element.
                        </Paragraph>
                        <BlockUIContainer>
                            <StackPanel>
                                <Label Foreground="Blue">Choose a value:</Label>
                                <ComboBox>
                                    <ComboBoxItem IsSelected="True">a</ComboBoxItem>
                                    <ComboBoxItem>b</ComboBoxItem>
                                    <ComboBoxItem>c</ComboBoxItem>
                                </ComboBox>
                                <Label Foreground ="Red">Choose a value:</Label>
                                <StackPanel>
                                    <RadioButton>x</RadioButton>
                                    <RadioButton>y</RadioButton>
                                    <RadioButton>z</RadioButton>
                                </StackPanel>
                                <Label>Enter a value:</Label>
                                <TextBox>
                                    A text editor embedded in flow content.
                                </TextBox>
                            </StackPanel>
                        </BlockUIContainer>
                    </Section>
                </FlowDocument>
            </FlowDocumentReader.Document>
        </FlowDocumentReader>-->
   
    </Grid>
</Window>